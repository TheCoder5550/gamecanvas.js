!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.GameCanvas=e():t.GameCanvas=e()}(this,()=>(()=>{"use strict";var t={d:(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)},e={};function n(t){let e=this;this.functions=[],this.keys=[],this.ctrlPressed=!1,this.shiftSPressed=!1,this.altPressed=!1,this.images=[],this.spheres=[],this.font="Arial",this.imageData=void 0,this.imageDataData=void 0,this.lastLoop=performance.now(),this.calculateFPS=!0,this.fps=-1,this.deltaTime=1;let n=["left","middle","right"];this.contextMenuDisabled=!1,this.disableScrollOnMobile=!1,this.eventFunctions={mousedown:"undefined"!=typeof OnMouseDown,mouseup:"undefined"!=typeof OnMouseUp,mousemove:"undefined"!=typeof OnMouseMove,contextmenu:"undefined"!=typeof OnContextMenu,touchstart:"undefined"!=typeof OnTouchStart,touchend:"undefined"!=typeof OnTouchEnd,touchmove:"undefined"!=typeof OnTouchMove,keydown:"undefined"!=typeof OnKeyDown,keyup:"undefined"!=typeof OnKeyUp},this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.createCanvas=function(){let t=document.createElement("canvas");return document.body.appendChild(t),t},this.setSize=function(t,n){e.canvas?(e.canvas.width=e.width=t,e.canvas.height=e.height=n,window.width=this.width,window.height=this.height):console.error("There is no canvas!")},this.fillPageWithCanvas=function(){e.canvas.style.position="fixed",e.canvas.style.top="0px",e.canvas.style.left="0px",e.setSize(window.innerWidth,window.innerHeight),e.disableScrollOnMobile=!0,e.contextMenuDisabled=!0,this.updateSizeOnResize=!0},this.requestFullscreen=function(){e.canvas.requestFullscreen?e.canvas.requestFullscreen():e.canvas.mozRequestFullScreen?e.canvas.mozRequestFullScreen():e.canvas.webkitRequestFullscreen?e.canvas.webkitRequestFullscreen():e.canvas.msRequestFullscreen&&e.canvas.msRequestFullscreen()},this.exitFullscreen=function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},this.lockPointer=function(){e.canvas.requestPointerLock=e.canvas.requestPointerLock||e.canvas.mozRequestPointerLock,e.canvas.requestPointerLock()},this.unlockPointer=function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,document.exitPointerLock()},this.disableContextMenu=function(){e.contextMenuDisabled=!0},this.enableContextMenu=function(){e.contextMenuDisabled=!1},this.key=function(t){return e.keys[t]},this.isCtrlPressed=function(){return e.ctrlPressed},this.isShiftPressed=function(){return e.shiftPressed},this.isAltPressed=function(){return e.altPressed},this.update=function(){if(e.calculateFPS){var t=performance.now(),n=t-e.lastLoop;e.fps=1e3/n,e.deltaTime=n/1e3,e.lastLoop=t,e.globalFunctions&&(window.fps=e.fps,window.deltaTime=e.deltaTime)}e.mouse.movementX=0,e.mouse.movementY=0,e.mouse.lastX=e.mouse.x,e.mouse.lastY=e.mouse.y},this.clearScreen=function(){e.ctx.clearRect(0,0,e.width,e.height)},this.background=function(t){e.ctx.fillStyle=t,e.ctx.fillRect(0,0,e.width,e.height)},this.circle=function(t,n,i,s,a,o){e.ctx.beginPath(),e.ctx.arc(t,n,i,0,2*Math.PI),e.ctx.fillStyle=s,a&&(e.ctx.strokeStyle=a),o&&(e.ctx.lineWidth=o),e.ctx.fill(),a&&e.ctx.stroke()},this.ring=function(t,n,i,s,a){e.ctx.beginPath(),e.ctx.arc(t,n,i,0,2*Math.PI),e.ctx.strokeStyle=s,a&&(e.ctx.lineWidth=a),e.ctx.stroke()},this.ellipse=function(t,n,i,s,a,o=0,c,h){e.ctx.beginPath(),e.ctx.ellipse(t,n,i,s,o,0,2*Math.PI),e.ctx.fillStyle=a,c&&(e.ctx.strokeStyle=c),h&&(e.ctx.lineWidth=h),e.ctx.fill(),c&&e.ctx.stroke()},this.rectangle=function(t,n,i,s,a,o,c){e.ctx.fillStyle=a,c&&(e.ctx.lineWidth=c),o?(e.ctx.beginPath(),e.ctx.strokeStyle=o,e.ctx.rect(t,n,i,s),e.ctx.fill(),e.ctx.stroke()):e.ctx.fillRect(t,n,i,s)},this.roundedRectangle=function(t,n,i,s,a,o,c,h){e.ctx.beginPath(),e.ctx.arc(t+o[0],n+o[0],o[0],Math.PI,1.5*Math.PI),e.ctx.lineTo(t+i-o[1],n),e.ctx.arc(t+i-o[1],n+o[1],o[1],1.5*Math.PI,2*Math.PI),e.ctx.lineTo(t+i,n+s-o[2]),e.ctx.arc(t+i-o[2],n+s-o[2],o[2],0,.5*Math.PI),e.ctx.lineTo(t+o[3],n+s),e.ctx.arc(t+o[3],n+s-o[3],o[3],.5*Math.PI,Math.PI),e.ctx.closePath(),c&&(h&&(e.ctx.lineWidth=h),e.ctx.strokeStyle=c,e.ctx.stroke()),e.ctx.fillStyle=a,e.ctx.fill()},this.triangle=function(t,n,i,s,a,o,c,h,r){e.ctx.beginPath(),e.ctx.moveTo(t,n),e.ctx.lineTo(i,s),e.ctx.lineTo(a,o),e.ctx.closePath(),e.ctx.fillStyle=c,r&&(e.ctx.lineWidth=r),e.ctx.fill(),h&&(e.ctx.strokeStyle=h,e.ctx.stroke())},this.setLineCap=function(t){e.ctx.lineCap=t},this.resetLineCap=function(){e.ctx.lineCap="butt"},this.line=function(t,n,i,s,a,o){e.ctx.beginPath(),e.ctx.moveTo(t,n),e.ctx.lineTo(i,s),o&&(e.ctx.strokeStyle=o),a&&(e.ctx.lineWidth=a),e.ctx.stroke()},this.picture=function(t,n,i,s,a){var o=e.images[t];if(o)o.complete&&e.ctx.drawImage(o,n,i,s,a);else{var c=new Image;c.src=t,c.onload=function(){e.ctx.drawImage(c,n,i,s,a)},e.images[t]=c}},this.setFont=function(t){e.font=t},this.setTextAlign=function(t){e.ctx.textAlign=t},this.setTextXAlign=function(t){e.ctx.textAlign=t},this.setTextYAlign=function(t){e.ctx.textBaseline=t},this.resetTextXAlign=function(){e.ctx.textAlign="left"},this.resetTextYAlign=function(){e.ctx.textBaseline="alphabetic"},this.text=function(t,n,i,s,a,o,c){e.ctx.beginPath(),e.ctx.font=s+"px "+e.font,e.ctx.fillStyle=a,c&&(e.ctx.lineWidth=c),e.ctx.fillText(t,n,i),o&&(e.ctx.strokeStyle=o,e.ctx.strokeText(t,n,i))},this.drawVector=function(t,n,i,s=1,a="black"){var o=e.normalizeVector(i),c=-o.y,h=o.x,r=t+i.x*s,u=n+i.y*s;e.line(t,n,r,u,3,a),e.triangle(r,u,r-7*o.x+7*c,u-7*o.y+7*h,r-7*o.x-7*c,u-7*o.y-7*h,a)},this.getPixelData=function(){e.imageData=e.ctx.getImageData(0,0,e.width,e.height),e.imageDataData=e.imageData.data},this.updatePixel=function(t,n,i,s,a,o=255){let c=4*(t+n*e.width);e.imageDataData[c]=i,e.imageDataData[c+1]=s,e.imageDataData[c+2]=a,e.imageDataData[c+3]=o},this.updatePixelIndex=function(t,n,i,s,a=255){var o=4*t;e.imageDataData[o]=n,e.imageDataData[o+1]=i,e.imageDataData[o+2]=s,e.imageDataData[o+3]=a},this.getPixel=function(t,n){let i=4*(t+n*e.width);return[e.imageDataData[i],e.imageDataData[i+1],e.imageDataData[i+2],e.imageDataData[i+3]]},this.getPixelIndex=function(t){let n=4*t;return[e.imageDataData[n],e.imageDataData[n+1],e.imageDataData[n+2],e.imageDataData[n+3]]},this.renderPixelData=function(){e.ctx.putImageData(e.imageData,0,0)},this.save=function(){e.ctx.save()},this.restore=function(){e.ctx.restore()},this.rotate=function(t){e.ctx.rotate(t)},this.translate=function(t,n){e.ctx.translate(t,n)},this.beginPath=function(){e.ctx.beginPath()},this.closePath=function(){e.ctx.closePath()},this.moveTo=function(t,n){e.ctx.moveTo(t,n)},this.lineTo=function(t,n){e.ctx.lineTo(t,n)},this.fill=function(){e.ctx.fill()},this.stroke=function(){e.ctx.stroke()},this.fillStyle=function(t){e.ctx.fillStyle=t},this.strokeStyle=function(t){e.ctx.strokeStyle=t},this.setLineWidth=function(t){e.ctx.lineWidth=t},this.lineWidth=function(t){e.ctx.lineWidth=t},this.strokeWeight=function(t){e.ctx.lineWidth=t},this.drawSphere=function(t,n,i,s,a={x:0,y:0,z:1}){var o=(t+n)*i*(s[0]+1)*(s[1]+1)*(s[2]+1)*(a.x+1)*(a.y+1)*(a.z+1);if(e.spheres[o])e.spheres[o].imageData?e.ctx.putImageData(e.spheres[o].imageData,t-i,n-i):e.spheres[o].image&&e.ctx.drawImage(e.spheres[o].image,t-i,n-i);else{for(var c=e.ctx.createImageData(2*i,2*i),h=0;h<2*i;h++)for(var r=0;r<2*i;r++){var u={origin:{x:r,y:h,z:0},direction:{x:0,y:0,z:1}},l={position:{x:i,y:i,z:2*i}},d={x:u.origin.x-l.position.x,y:u.origin.y-l.position.y,z:u.origin.z-l.position.z},f=e.dot3D(u.direction,d),m=e.getLength(d.x,d.y,d.z),x=f*f-(m*m-i*i);if(x>=0){var g=-f-Math.sqrt(x);if(g>0){var v={x:u.origin.x+u.direction.x*g,y:u.origin.y+u.direction.y*g,z:u.origin.z+u.direction.z*g},y=e.normalize3DVector({x:l.position.x-v.x,y:l.position.y-v.y,z:l.position.z-v.z}),p=e.dot3D(a,y),D=4*(r+h*i*2);c.data[D]=s[0]*p,c.data[D+1]=s[1]*p,c.data[D+2]=s[2]*p,c.data[D+3]=255}}}window.createImageBitmap?(e.spheres[o]={imageData:void 0,image:void 0},createImageBitmap(c).then(function(s){e.ctx.drawImage(s,t-i,n-i),e.spheres[o]={imageData:void 0,image:s}})):(e.ctx.putImageData(c,t-i,n-i),e.spheres[o]={imageData:c,image:void 0})}},this.createSound=function(t,e=1,n=0,i=!1){var s=new Audio(t);return s.loop=i,s.currentTime=n,s.volume=e,{volume:e,startTime:n,audio:s}},this.playSound=function(t){t.audio.currentTime=t.startTime,t.audio.volume=t.volume,t.audio.play()},this.stopSound=function(t){t.audio.stop()},this.pauseSound=function(t){t.audio.pause()},this.backgroundMusic=function(t){var e=new Audio(t);return e.loop=!0,e.play(),e},this.fadeOutSound=function(t,e=1){var n=t.volume,i=0,s=setInterval(()=>{t.audio.volume=n/(20*e)*(20*e-i),++i>20*e&&(t.audio.pause(),clearInterval(s))},50)},this.playTone=function(t=440,n=1,i=1,s="sine"){var a=e.audioContext.createOscillator(),o=e.audioContext.createGain();o.gain.value=i,o.connect(e.audioContext.destination),a.type=s,a.frequency.value=t,a.connect(o),a.start(),setTimeout(()=>{a.stop()},1e3*n)},this.DegToRad=Math.PI/180,this.RadToDeg=180/Math.PI,this.PI=Math.PI,this.TWO_PI=2*Math.PI,this.TAU=this.TWO_PI,this.getDistanceSqr=function(t,e,n,i){var s=t-n,a=e-i;return s*s+a*a},this.getDistanceSqr3D=function(t,e,n,i,s,a){var o=t-n,c=e-i,h=s-a;return o*o+c*c+h*h},this.getDistance=function(t,n,i,s){return Math.sqrt(e.getDistanceSqr(t,n,i,s))},this.getDistance3D=function(t,n,i,s,a,o){return Math.sqrt(e.getDistanceSqr3D(t,n,i,s,a,o))},this.getAngle=function(t,e,n,i){return Math.atan2(i-e,n-t)},this.normalize=function(t,e){var n=Math.sqrt(t*t+e*e);return{x:t/n,y:e/n}},this.normalizeVector=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y);return{x:t.x/e,y:t.y/e}},this.normalize3D=function(t,e,n){var i=Math.sqrt(t*t+e*e+n*n);return{x:t/i,y:e/i,z:n/i}},this.normalize3DVector=function(t){var e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return{x:t.x/e,y:t.y/e,z:t.z/e}},this.lengthVector=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},this.length3DVector=function(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)},this.getLength=function(){for(var t=0,e=0;e<arguments.length;e++){var n=arguments[e];t+=n*n}return Math.sqrt(t)},this.dot=function(t,e){return t.x*e.x+t.y*e.y},this.dot3D=function(t,e){return t.x*e.x+t.y*e.y+t.z*e.z},this.crossProduct3D=function(t,e){return{x:t.y*e.z-t.z*e.y,y:t.z*e.x-t.x*e.z,z:t.x*e.y-t.y*e.x}},this.rectanglesIntersect=function(t,e,n,i,s,a,o,c){return t+n>s&&t<s+o&&e+i>a&&e<a+c},this.circlesIntersect=function(t,n,i,s,a,o){return e.getDistance(t,n,s,a)<i+o},this.circleRectangleIntersect=function(t,e,n,i,s,a,o){var c=Math.abs(t-(i+a/2)),h=Math.abs(e-(s+o/2));if(c>a/2+n)return!1;if(h>o/2+n)return!1;if(c<=a/2)return!0;if(h<=o/2)return!0;var r=c-a/2,u=h-o/2;return r*r+u*u<=n*n},this.random=function(t){return Math.random()*t},this.randomInt=function(t){return Math.random()*t|0},this.randomArray=function(t){return t[Math.random()*t.length|0]},this.randomColor=function(t){if(t){var e=256/t;return"rgb("+Math.ceil((256*Math.random()|0)/e)*e+","+Math.ceil((256*Math.random()|0)/e)*e+","+Math.ceil((256*Math.random()|0)/e)*e+")"}return"rgb("+(256*Math.random()|0)+","+(256*Math.random()|0)+","+(256*Math.random()|0)+")"},this.create2DArray=function(t,e,n=()=>0){for(var i=new Array(t),s=0;s<t;s++){i[s]=new Array(e);for(var a=0;a<e;a++)i[s][a]=n(s,a)}return i},this.mapValue=function(t,e,n,i,s){return(t-e)*(s-i)/(n-e)+i},this.canvasToURL=function(){return e.canvas.toDataURL()},this.canvasToImage=function(){var t=new Image;return t.src=e.canvas.toDataURL(),t},this.saveToFile=function(t="canvas.png"){var n=document.createElement("a");n.download=t,n.href=e.canvas.toDataURL(),n.click()},this.setCookie=function(t,e,n=36500){let i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);let s="expires="+i.toUTCString();document.cookie=t+"="+e+";"+s+";path=/"},this.getCookie=function(t){if(0==t.length)return!1;var e=t+"=",n=document.cookie.split(";");for(let t=0;t<n.length;t++){let s=n[t];var i=s.indexOf(e);if(i>0)return s.substr(i+e.length)}return!1},this.deleteCookie=function(t){document.cookie=t+"=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/"},navigator.getBattery&&navigator.getBattery().then(function(t){t.addEventListener("levelchange",function(){e.batteryLevel=100*t.level}),e.batteryLevel=100*t.level}),this.getBatteryLevel=function(){return e.batteryLevel},this.functions=[{func:this.createCanvas,name:"createCanvas"},{func:this.setSize,name:"setSize"},{func:this.fillPageWithCanvas,name:"fillPageWithCanvas"},{func:this.requestFullscreen,name:"requestFullscreen"},{func:this.exitFullscreen,name:"exitFullscreen"},{func:this.lockPointer,name:"lockPointer"},{func:this.unlockPointer,name:"unlockPointer"},{func:this.disableContextMenu,name:"disableContextMenu"},{func:this.enableContextMenu,name:"enableContextMenu"},{func:this.key,name:"key"},{func:this.isCtrlPressed,name:"isCtrlPressed"},{func:this.isShiftPressed,name:"isShiftPressed"},{func:this.isAltPressed,name:"isAltPressed"},{func:this.update,name:"update"},{func:this.clearScreen,name:"clearScreen"},{func:this.background,name:"background"},{func:this.circle,name:"circle"},{func:this.ring,name:"ring"},{func:this.ellipse,name:"ellipse"},{func:this.rectangle,name:"rectangle"},{func:this.roundedRectangle,name:"roundedRectangle"},{func:this.triangle,name:"triangle"},{func:this.picture,name:"picture"},{func:this.setLineCap,name:"setLineCap"},{func:this.resetLineCap,name:"resetLineCap"},{func:this.line,name:"line"},{func:this.setFont,name:"setFont"},{func:this.setTextAlign,name:"setTextAlign"},{func:this.setTextXAlign,name:"setTextXAlign"},{func:this.setTextYAlign,name:"setTextYAlign"},{func:this.resetTextXAlign,name:"resetTextXAlign"},{func:this.resetTextYAlign,name:"resetTextYAlign"},{func:this.text,name:"text"},{func:this.drawVector,name:"drawVector"},{func:this.getPixelData,name:"getPixelData"},{func:this.updatePixel,name:"updatePixel"},{func:this.updatePixelIndex,name:"updatePixelIndex"},{func:this.getPixel,name:"getPixel"},{func:this.getPixelIndex,name:"getPixelIndex"},{func:this.renderPixelData,name:"renderPixelData"},{func:this.save,name:"save"},{func:this.restore,name:"restore"},{func:this.rotate,name:"rotate"},{func:this.translate,name:"translate"},{func:this.beginPath,name:"beginPath"},{func:this.closePath,name:"closePath"},{func:this.moveTo,name:"moveTo"},{func:this.lineTo,name:"lineTo"},{func:this.fill,name:"fill"},{func:this.stroke,name:"stroke"},{func:this.fillStyle,name:"fillStyle"},{func:this.strokeStyle,name:"strokeStyle"},{func:this.setLineWidth,name:"setLineWidth"},{func:this.lineWidth,name:"lineWidth"},{func:this.strokeWeight,name:"strokeWeight"},{func:this.drawSphere,name:"drawSphere"},{func:this.createSound,name:"createSound"},{func:this.playSound,name:"playSound"},{func:this.stopSound,name:"stopSound"},{func:this.pauseSound,name:"pauseSound"},{func:this.fadeOutSound,name:"fadeOutSound"},{func:this.playTone,name:"playTone"},{func:this.getDistanceSqr,name:"getDistanceSqr"},{func:this.getDistance,name:"getDistance"},{func:this.getDistanceSqr3D,name:"getDistanceSqr3D"},{func:this.getDistance3D,name:"getDistance3D"},{func:this.getAngle,name:"getAngle"},{func:this.normalize,name:"normalize"},{func:this.normalizeVector,name:"normalizeVector"},{func:this.normalize3D,name:"normalize3D"},{func:this.normalize3DVector,name:"normalize3DVector"},{func:this.getLength,name:"getLength"},{func:this.dot,name:"dot"},{func:this.dot3D,name:"dot3D"},{func:this.crossProduct3D,name:"crossProduct3D"},{func:this.lengthVector,name:"lengthVector"},{func:this.length3DVector,name:"length3DVector"},{func:this.rectanglesIntersect,name:"rectanglesIntersect"},{func:this.circlesIntersect,name:"circlesIntersect"},{func:this.circleRectangleIntersect,name:"circleRectangleIntersect"},{func:this.random,name:"random"},{func:this.randomInt,name:"randomInt"},{func:this.randomArray,name:"randomArray"},{func:this.randomColor,name:"randomColor"},{func:this.create2DArray,name:"create2DArray"},{func:this.mapValue,name:"mapValue"},{func:this.canvasToURL,name:"canvasToURL"},{func:this.canvasToImage,name:"canvasToImage"},{func:this.saveToFile,name:"saveToFile"},{func:this.setCookie,name:"setCookie"},{func:this.getCookie,name:"getCookie"},{func:this.deleteCookie,name:"deleteCookie"},{func:this.getBatteryLevel,name:"getBatteryLevel"}],this.variables=[{variable:this.RadToDeg,name:"RadToDeg"},{variable:this.DegToRad,name:"DegToRad"},{variable:this.PI,name:"PI"},{variable:this.TWO_PI,name:"TWO_PI"},{variable:this.TAU,name:"TAU"}],this.makeFunctionsGlobal=function(){this.globalFunctions=!0,this.functions.forEach(t=>{window[t.name]=t.func}),this.variables.forEach(t=>{window[t.name]=t.variable}),window.fps=this.fps,window.deltaTime=this.deltaTime},this.settings=t,void 0===this.settings?(this.canvas=this.createCanvas(),this.fillPageWithCanvas(),this.makeFunctionsGlobal()):(void 0!==this.settings.canvas?this.canvas=this.settings.canvas:(this.canvas=this.createCanvas(),void 0===this.settings.width&&void 0===this.settings.height&&this.fillPageWithCanvas(),(void 0===this.settings.globalFunctions||void 0!==this.settings.globalFunctions&&this.settings.globalFunctions)&&this.makeFunctionsGlobal()),void 0!==this.settings.width&&(this.width=this.settings.width,this.canvas.width=window.width=this.width),void 0!==this.settings.height&&(this.height=this.settings.height,this.canvas.height=window.height=this.height),void 0!==this.settings.updateSizeOnResize&&(this.updateSizeOnResize=this.settings.updateSizeOnResize)),document.addEventListener("keydown",t=>{this.altPressed=t.altKey,this.shiftPressed=t.shiftKey,this.ctrlPressed=t.ctrlKey,this.keys[t.key]=this.keys[t.keyCode]=!0,this.eventFunctions.keydown&&OnKeyDown(t)}),document.addEventListener("keyup",t=>{this.altPressed=t.altKey,this.shiftPressed=t.shiftKey,this.ctrlPressed=t.ctrlKey,this.keys[t.key]=this.keys[t.keyCode]=!1,this.eventFunctions.keyup&&OnKeyUp(t)}),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.updateSizeOnResize&&window.addEventListener("resize",()=>{this.setSize(window.innerWidth,window.innerHeight)}),this.mouse={x:0,y:0,lastX:0,lastY:0,movementX:0,movementY:0,left:!1,middle:!1,right:!1,down:!1},this.touches=[],this.globalFunctions&&(window.mouse=this.mouse,window.touches=this.touches),this.canvas.addEventListener("mousemove",t=>{let e=this.canvas.getBoundingClientRect();this.mouse.x=(t.clientX-e.left)/(e.width/this.width),this.mouse.y=(t.clientY-e.top)/(e.height/this.height),this.mouse.movementX=t.movementX,this.mouse.movementY=t.movementY,this.eventFunctions.mousemove&&OnMouseMove(t)}),this.canvas.addEventListener("mousedown",t=>{let e=t.button;e<3&&(this.mouse[n[e]]=!0),this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.eventFunctions.mousedown&&OnMouseDown(t)}),this.canvas.addEventListener("mouseup",t=>{let e=t.button;e<3&&(this.mouse[n[e]]=!1),this.eventFunctions.mouseup&&OnMouseUp(t)}),this.canvas.addEventListener("contextmenu",t=>(this.eventFunctions.contextmenu&&OnContextMenu(t),!this.contextMenuDisabled||(t.preventDefault(),!1))),this.updateTouches=function(){let t=this.canvas.getBoundingClientRect();this.touches=[];for(let s=0;s<event.touches.length;s++){var e=event.touches[s],n=(e.pageX-t.left)/(t.width/this.width),i=(e.pageY-t.top)/(t.height/this.height);this.touches[s]={x:n,y:i,id:e.identifier,force:e.force}}this.globalFunctions&&(window.touches=this.touches)},this.canvas.addEventListener("touchmove",t=>{this.disableScrollOnMobile&&t.preventDefault(),this.updateTouches(),this.mouse.x=this.touches[0].x,this.mouse.y=this.touches[0].y,this.eventFunctions.touchmove&&OnTouchMove(t)}),this.canvas.addEventListener("touchend",t=>{this.disableScrollOnMobile&&t.preventDefault(),this.touches=[],this.globalFunctions&&(window.touches=this.touches),this.mouse.left=!1,this.eventFunctions.touchend&&OnTouchEnd(t)}),this.canvas.addEventListener("touchstart",t=>{this.disableScrollOnMobile&&t.preventDefault(),this.updateTouches(),this.mouse.x=this.touches[0].x,this.mouse.y=this.touches[0].y,this.mouse.left=!0,this.audioContext||(this.audioContext=new(window.AudioContext||window.webkitAudioContext)),this.eventFunctions.touchstart&&OnTouchStart(t)}))}return t.d(e,{default:()=>n}),e.default})());