!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.GameCanvas=n():t.GameCanvas=n()}(this,()=>(()=>{"use strict";var t={d:(n,o)=>{for(var e in o)t.o(o,e)&&!t.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:o[e]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n)},n={};function o(t,n,o,e){var i=this;function a(t,n,o){for(var e=new Array(o),i=0;i<e.length;i++)e[i]=t<n-2?a(t+1,n,o):new Array(o);return e}0==arguments.length&&(t=null,n="FULLSCREEN"),"string"==typeof t&&(t=document.getElementById(t)),this.canvas=t||document.body.appendChild(document.createElement("canvas")),"FULLSCREEN"==(n=n||"FULLSCREEN")?(e=o||e,document.body.style=e&&e.appliedBodyStyle||"padding: 0;margin: 0;overflow: hidden;",this.canvas.height=window.innerHeight):this.canvas.height=o,this.canvas.width="FULLSCREEN"==n?window.innerWidth:n,this.ctx=this.canvas.getContext("2d"),this.settings=e,this.globalFunctions=!e||!e.hasOwnProperty("globalFunctions")||e.globalFunctions,this.topFunction=this.globalFunctions?window:this,this.imagesToLoad=0,this.preloadedImages=[],this.storedImages=[],this.storedImageData=[],this.topFunction.width=this.canvas.width,this.topFunction.height=this.canvas.height,this.topFunction.isItWorking=function(){msg="Yup, it's working!\n(This function can be removed from your code now if you want)",console.log(msg)},window.onload=function(){"undefined"!=typeof preload&&"function"==typeof preload?preload():i.callFunctions()},this.callFunctions=function(){if("undefined"!=typeof start&&start(),"undefined"!=typeof loop){var t=loop;loop=function(){t(),requestAnimationFrame(loop)},loop()}},this.topFunction.clearScreen=function(){i.ctx.clearRect(0,0,i.canvas.width,i.canvas.height)},this.topFunction.background=function(t){i.ctx.beginPath(),i.ctx.fillStyle=t,i.ctx.fillRect(0,0,i.topFunction.width,i.topFunction.height),i.ctx.closePath()},this.topFunction.drawRectangle=function(t,n,o,e,a,c,u){i.ctx.beginPath(),i.ctx.rect(t,n,o,e),i.topFunction.renderShape(a,c,u)},this.topFunction.rect=this.topFunction.drawRectangle,this.topFunction.rectangle=this.topFunction.drawRectangle,this.topFunction.drawCircle=function(t,n,o,e,a,c){i.ctx.beginPath(),i.ctx.arc(t,n,o,0,2*Math.PI),i.ctx.closePath(),i.topFunction.renderShape(e,a,c)},this.topFunction.circle=this.topFunction.drawCircle,this.topFunction.drawRing=function(t,n,o,e,a){i.topFunction.drawCircle(t,n,o,"",e,a?{lineWidth:a}:void 0)},this.topFunction.ring=this.topFunction.drawRing,this.topFunction.drawTriangle=function(t,n,o,e,a,c,u,r,s){i.ctx.beginPath(),t.hasOwnProperty("x")?(i.ctx.moveTo(t.x,t.y),i.ctx.lineTo(n.x,n.y),i.ctx.lineTo(o.x,o.y),color=e,s=a):(i.ctx.moveTo(t,n),i.ctx.lineTo(o,e),i.ctx.lineTo(a,c)),i.ctx.closePath(),i.topFunction.renderShape(u,r,s)},this.topFunction.triangle=this.topFunction.drawTriangle,this.topFunction.tri=this.topFunction.drawTriangle,this.topFunction.drawTriangleEquilateral=function(t,n,o,e,a,c){var u=t+Math.cos(30*Math.PI/180)*(c&&c.width||o),r=n+Math.sin(30*Math.PI/180)*(c&&c.height||o),s=t+Math.cos(150*Math.PI/180)*(c&&c.width||o),h=n+Math.sin(150*Math.PI/180)*(c&&c.height||o),p=t,d=n-o;i.topFunction.drawTriangle(u,r,s,h,p,d,e,a,c)},this.topFunction.triangleEq=this.topFunction.drawTriangleEquilateral,this.topFunction.drawRegularPolygon=function(t,n,o,e,a,c,u){i.ctx.beginPath();for(var r=-90;r<270;r+=360/e){var s=t+Math.cos(r*Math.PI/180)*(u&&u.width||o),h=n+Math.sin(r*Math.PI/180)*(u&&u.height||o);-90==r?i.ctx.moveTo(s,h):i.ctx.lineTo(s,h)}i.ctx.closePath(),i.topFunction.renderShape(a,c,u)},this.topFunction.regPolygon=this.topFunction.drawRegularPolygon,this.topFunction.drawEllipse=function(t,n,o,e,a,c,u){i.ctx.beginPath(),i.ctx.ellipse(t,n,o,e,u&&u.rotation||0,0,2*Math.PI),i.ctx.closePath(),i.topFunction.renderShape(a,c,u)},this.topFunction.ellipse=this.topFunction.drawEllipse,this.topFunction.oval=this.topFunction.drawEllipse,this.topFunction.preloadImage=function(t){var n=i.preloadedImages.find(function(n){return n.src===t});if(console.log("Preloading image... "+t),!n){i.imagesToLoad++;var o=new Image;return o.src=t,o.onload=function(){i.imagesToLoad--,i.imagesToLoad<=0&&i.callFunctions(),console.log("Image preloaded! "+o.src)},i.preloadedImages.push({src:t,image:o}),o}},this.topFunction.drawImage=function(t,n,o,e,a,c){var u=i.preloadedImages.find(function(n){return n.src===t});if(u)c&&void 0!==c.rotation&&null!==c.rotation?(i.ctx.save(),i.ctx.translate(n,o),i.ctx.rotate(c.rotation),i.ctx.drawImage(u.image,-e/2,-a/2,e,a),i.ctx.restore()):i.ctx.drawImage(u.image,n,o,e,a);else{var r=i.topFunction.preloadImage(t);r.onload=function(){i.ctx.drawImage(r,n,o,e,a)}}},this.topFunction.image=this.topFunction.drawImage,this.topFunction.picture=this.topFunction.drawImage,this.topFunction.imageReadPixel=function(t,n,o){var e=i.storedImageData.find(function(n){return n.src===t});if(e)return e.imagePixelReader.isDoneLoading?e.imagePixelReader.readPixel(n,o):"Data is added, but has not loaded yet";var a=new i.topFunction.ImagePixelReader(t);return i.storedImageData.push({src:t,imagePixelReader:a}),a.readPixel(n,o)},this.topFunction.ImagePixelReader=function(t){var n=this,o=i.preloadedImages.find(function(n){return n.src===t});o?(n.image=o.image,n.isDoneLoading=!0,n.canvas=document.createElement("canvas"),n.canvas.width=n.image.width,n.canvas.height=n.image.height,n.ctx=n.canvas.getContext("2d"),n.ctx.drawImage(n.image,0,0),n.imageData=n.ctx.getImageData(0,0,n.image.width,n.image.height).data):console.error("Please preload image before getting data!"),this.readPixel=function(t,o){if(n.isDoneLoading){var e=4*(t+o*n.image.height);return[n.imageData[e],n.imageData[e+1],n.imageData[e+2],n.imageData[e+3]]}console.log("Is loading!..")},this.onload=function(){}},this.topFunction.drawLine=function(t,n,o,e,a,c){i.ctx.beginPath(),t.hasOwnProperty("x")?(i.ctx.moveTo(t.x,t.y),i.ctx.lineTo(n.x,n.y),a=o,c=e):(i.ctx.moveTo(t,n),i.ctx.lineTo(o,e)),i.ctx.closePath(),i.ctx.lineCap=c&&c.roundedCorners?"round":"butt",i.ctx.strokeStyle=a,i.ctx.lineWidth=c&&c.lineWidth||2,i.ctx.stroke()},this.topFunction.line=this.topFunction.drawLine,this.topFunction.drawPoint=function(t,n){t.hasOwnProperty("x")&&(n=t.y,t=t.x),i.topFunction.drawCircle(t,n,5,"black")},this.topFunction.point=this.topFunction.drawPoint,this.topFunction.drawText=function(t,n,o,e,a,c,u){"object"==typeof c&&"[object Object]"===c.toString()&&(u=c,c=""),i.ctx.beginPath(),i.ctx.font=(e||30)+"px "+(u&&u.fontFamily)||"Arial",i.ctx.textAlign=u&&u.alignText||"left",i.ctx.lineWidth=u&&u.lineWidth||2,i.ctx.closePath(),a&&(i.ctx.fillStyle=a,i.ctx.fillText(t,n,o)),c&&(i.ctx.strokeStyle=c,i.ctx.strokeText(t,n,o))},this.topFunction.text=this.topFunction.drawText,this.topFunction.drawPolygon=function(t,n,o,e){var a=t.constructor===Array?t:arguments;i.ctx.beginPath(),i.ctx.moveTo(a[0].x,a[0].y);for(var c=1;c<a.length;c++){var u=a[c];i.ctx.lineTo(u.x,u.y)}i.ctx.closePath(),i.topFunction.renderShape(n,o,e)},this.topFunction.polygon=this.topFunction.drawPolygon,this.topFunction.gradient=function(t,n,o,e){var a;t.constructor===Array?(o=n,a=t):a=[t,n];for(var c=i.ctx.createLinearGradient(0,0,0,o||100),u=0;u<a.length;u++)c.addColorStop(1/(a.length-1)*u,a[u]);return c},this.topFunction.beginShape=function(){i.ctx.beginPath()},this.topFunction.moveTo=function(t,n){i.ctx.moveTo(t,n)},this.topFunction.lineTo=function(t,n){i.ctx.lineTo(t,n)},this.topFunction.curveTo=function(t,n,o,e){i.ctx.quadraticCurveTo(o,e,t,n)},this.topFunction.closeShape=function(){i.ctx.closePath()},this.topFunction.renderShape=function(t,n,o){"object"==typeof t&&"[object Object]"===t.toString()&&(o=t,t=""),"object"==typeof n&&"[object Object]"===n.toString()&&(o=n,n=""),i.ctx.lineJoin=o&&o.roundedCorners?"round":"miter",i.ctx.lineWidth=o&&o.lineWidth||2,o&&o.hasOwnProperty("fillColor")&&(i.ctx.fillStyle=o.fillColor,i.ctx.fill()),o&&o.hasOwnProperty("strokeColor")&&(i.ctx.strokeStyle=o.strokeColor,i.ctx.stroke()),t&&(i.ctx.fillStyle=t,i.ctx.fill()),n&&(i.ctx.strokeStyle=n,i.ctx.stroke())},this.topFunction.pixels=[],this.imageData,this.topFunction.updatePixelData=function(){i.imageData=i.ctx.getImageData(0,0,i.canvas.width,i.canvas.height),i.topFunction.pixels=i.imageData.data},this.topFunction.updatePixel=function(t,n,o,e,a,c){var u=4*(t+n*i.canvas.width);i.topFunction.pixels[u]=o,i.topFunction.pixels[u+1]=e,i.topFunction.pixels[u+2]=a,i.topFunction.pixels[u+3]=void 0===c?255:c},this.topFunction.readPixel=function(t,n){var o=4*(t+n*i.canvas.width);return[i.topFunction.pixels[o],i.topFunction.pixels[o+1],i.topFunction.pixels[o+2],i.topFunction.pixels[o+3]]},this.topFunction.renderPixelData=function(){i.ctx.putImageData(i.imageData,0,0)},this.topFunction.getDistance=function(t,n,o,e){t.hasOwnProperty("x")&&(e=n.y,o=n.x,n=t.y,t=t.x);var i=t-o,a=n-e;return Math.sqrt(i*i+a*a)},this.topFunction.distance=this.topFunction.getDistance,this.topFunction.getAngle=function(t,n,o,e,i){return t.hasOwnProperty("x")&&(i=o,e=n.y,o=n.x,n=t.y,t=t.x),i&&i.angleMode&&("DEG"==i.angleMode.toUpperCase()||"DEGREES"==i.angleMode.toUpperCase())?180*Math.atan2(e-n,o-t)/Math.PI:i&&i.angleMode&&("RAD"==i.angleMode.toUpperCase()||"RADIUS"==i.angleMode.toUpperCase())||!i?Math.atan2(e-n,o-t):void 0},this.topFunction.random=function(t,n){return void 0===n?Math.random()*t:Math.random()*(n-t)+t},this.topFunction.randomInt=function(t,n){return void 0===n?Math.random()*t|0:Math.random()*(n-t)+t|0},this.topFunction.randomArray=function(t){return t[Math.random()*t.length|0]},this.topFunction.canvasToURL=function(){return i.canvas.toDataURL()},this.topFunction.canvasToImage=function(){var t=new Image;return t.src=i.canvas.toDataURL(),t},this.topFunction.downloadCanvasPNG=function(t){var n=document.createElement("a");n.download=t||"downloadCanvasPNG.png",n.href=i.canvas.toDataURL(),n.click()},this.topFunction.swap=function(t,n){return[n,t]},this.topFunction.createArray=function(t,n){return a(0,t,n||10)},this.topFunction.mouse={x:0,y:0,left:!1,middle:!1,right:!1},this.topFunction.mouseX=0,this.topFunction.mouseY=0,this.topFunction.touch={x:0,y:0,touching:!1,touches:[]},this.keyNumber=[],this.keyName=[],this.topFunction.isKeyPressed=function(t){return isNaN(t)?!!i.keyName[t]:!!i.keyNumber[t]},this.topFunction.getKey=this.topFunction.isKeyPressed,this.canvas.addEventListener("mousemove",function(t){var n=i.canvas.getBoundingClientRect();i.topFunction.mouse.x=i.topFunction.mouseX=Math.round((t.clientX-n.left)*(i.topFunction.width/n.width)),i.topFunction.mouse.y=i.topFunction.mouseY=Math.round((t.clientY-n.top)*(i.topFunction.height/n.height)),"function"==typeof OnMouseMove&&OnMouseMove(t)}),this.canvas.addEventListener("mousedown",function(t){switch(t.which){case 1:i.topFunction.mouse.left=!0;break;case 2:i.topFunction.mouse.middle=!0;break;case 3:i.topFunction.mouse.right=!0}"function"==typeof OnMouseDown&&OnMouseDown(t)}),this.canvas.addEventListener("mouseup",function(t){switch(t.which){case 1:i.topFunction.mouse.left=!1;break;case 2:i.topFunction.mouse.middle=!1;break;case 3:i.topFunction.mouse.right=!1}"function"==typeof OnMouseUp&&OnMouseUp(t)}),this.canvas.addEventListener("touchstart",function(t){t.preventDefault(),c(t),i.topFunction.touch.x=t.touches[0].pageX,i.topFunction.touch.y=t.touches[0].pageY,i.topFunction.touch.touching=!0,"function"==typeof OnTouchStart&&OnTouchStart(t)}),this.canvas.addEventListener("touchend",function(t){t.preventDefault(),c(t),i.topFunction.touch.touching=!1,"function"==typeof OnTouchEnd&&OnTouchEnd(t)}),this.canvas.addEventListener("touchmove",function(t){t.preventDefault(),c(t),i.settings.setMouseToTouch?(i.topFunction.touch.x=i.topFunction.mouse.x=i.topFunction.mouseX=t.touches[0].pageX,i.topFunction.touch.y=i.topFunction.mouse.y=i.topFunction.mouseY=t.touches[0].pageY):(i.topFunction.touch.x=t.touches[0].pageX,i.topFunction.touch.y=t.touches[0].pageY),"function"==typeof OnTouchMove&&OnTouchMove(t)});var c=function(t){i.topFunction.touch.touches=[];for(var n=0;n<t.touches.length;n++)i.topFunction.touch.touches.push({x:t.touches[n].pageX,y:t.touches[n].pageY,id:t.touches[n].identifier})};document.addEventListener("keydown",function(t){i.keyNumber[t.which]=!0,i.keyName[t.key]=!0,"function"==typeof OnKeyDown&&OnKeyDown(t)}),document.addEventListener("keyup",function(t){i.keyNumber[t.which]=!1,i.keyName[t.key]=!1,"function"==typeof OnKeyUp&&OnkeyUp(t)})}return t.d(n,{default:()=>o}),n.default})());